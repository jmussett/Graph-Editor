var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function s(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(t,e,n,o){if(t){const s=u(t,e,n,o);return t[0](s)}}function u(t,e,n,o){return t[1]&&o?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](o(e))):n.ctx}function r(t,e,n,o){if(t[2]&&o){const s=t[2](o(n));if("object"==typeof e.dirty){const t=[],n=Math.max(e.dirty.length,s.length);for(let o=0;o<n;o+=1)t[o]=e.dirty[o]|s[o];return t}return e.dirty|s}return e.dirty}function i(t,e){t.appendChild(e)}function a(t,e,n){t.insertBefore(e,n||null)}function d(t){t.parentNode.removeChild(t)}function f(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function p(t){return document.createElement(t)}function h(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function g(t){return document.createTextNode(t)}function $(){return g(" ")}function m(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function v(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function x(t,e){e=""+e,t.data!==e&&(t.data=e)}function b(t,e,n){t.classList[n?"add":"remove"](e)}let y;function k(t){y=t}function I(){if(!y)throw new Error("Function called outside component initialization");return y}function w(t){I().$$.on_mount.push(t)}function S(){const t=I();return(e,n)=>{const o=t.$$.callbacks[e];if(o){const s=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);o.slice().forEach(e=>{e.call(t,s)})}}}const N=[],E=[],T=[],_=[],D=Promise.resolve();let z=!1;function C(t){T.push(t)}function B(t){_.push(t)}const M=new Set;function O(){do{for(;N.length;){const t=N.shift();k(t),q(t.$$)}for(;E.length;)E.pop()();for(let t=0;t<T.length;t+=1){const e=T[t];M.has(e)||(M.add(e),e())}T.length=0}while(N.length);for(;_.length;)_.pop()();z=!1,M.clear()}function q(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(C)}}const A=new Set;let X;function Y(){X={r:0,c:[],p:X}}function j(){X.r||o(X.c),X=X.p}function F(t,e){t&&t.i&&(A.delete(t),t.i(e))}function L(t,e,n,o){if(t&&t.o){if(A.has(t))return;A.add(t),X.c.push(()=>{A.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}}function G(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function U(t){t&&t.c()}function P(t,n,c){const{fragment:l,on_mount:u,on_destroy:r,after_update:i}=t.$$;l&&l.m(n,c),C(()=>{const n=u.map(e).filter(s);r?r.push(...n):o(n),t.$$.on_mount=[]}),i.forEach(C)}function R(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function H(t,e){-1===t.$$.dirty[0]&&(N.push(t),z||(z=!0,D.then(O)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function J(e,s,c,l,u,r,i=[-1]){const a=y;k(e);const d=s.props||{},f=e.$$={fragment:null,ctx:null,props:r,update:t,not_equal:u,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:n(),dirty:i};let p=!1;f.ctx=c?c(e,d,(t,n,...o)=>{const s=o.length?o[0]:n;return f.ctx&&u(f.ctx[t],f.ctx[t]=s)&&(f.bound[t]&&f.bound[t](s),p&&H(e,t)),n}):[],f.update(),p=!0,o(f.before_update),f.fragment=!!l&&l(f.ctx),s.target&&(s.hydrate?f.fragment&&f.fragment.l(function(t){return Array.from(t.childNodes)}(s.target)):f.fragment&&f.fragment.c(),s.intro&&F(e.$$.fragment),P(e,s.target,s.anchor),O()),k(a)}class K{$destroy(){R(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}const Q=[];function V(e){let n,o,s,c,l,u,r,f;return{c(){n=p("div"),o=h("svg"),s=h("filter"),c=h("feGaussianBlur"),l=h("g"),u=h("path"),r=h("g"),f=h("path"),v(c,"stdDeviation","5"),v(c,"in","SourceGraphic"),v(s,"id","highlight"),v(s,"filterUnits","userSpaceOnUse"),v(u,"class","curve-selector svelte-nng1pw"),v(u,"d",e[1]),v(f,"class","curve svelte-nng1pw"),v(f,"d",e[1]),v(o,"class","svelte-nng1pw"),v(n,"class","node-relation svelte-nng1pw")},m(t,e){a(t,n,e),i(n,o),i(o,s),i(s,c),i(o,l),i(l,u),i(o,r),i(r,f)},p(t,[e]){2&e&&v(u,"d",t[1]),2&e&&v(f,"d",t[1])},i:t,o:t,d(t){t&&d(n)}}}class W{constructor(e,n){this.sourceNodeIndex=e.sourceNodeIndex,this.sourceSocketIndex=e.sourceSocketIndex,this.targetNodeIndex=e.targetNodeIndex,this.targetSocketIndex=e.targetSocketIndex,this.sourceSocket=n.nodes[e.sourceNodeIndex].outputs[e.sourceSocketIndex],this.targetSocket=n.nodes[e.targetNodeIndex].inputs[e.targetSocketIndex],this.curve=function(e,n=t){let o;const s=[];function l(t){if(c(e,t)&&(e=t,o)){const t=!Q.length;for(let t=0;t<s.length;t+=1){const n=s[t];n[1](),Q.push(n,e)}if(t){for(let t=0;t<Q.length;t+=2)Q[t][0](Q[t+1]);Q.length=0}}}return{set:l,update:function(t){l(t(e))},subscribe:function(c,u=t){const r=[c,u];return s.push(r),1===s.length&&(o=n(l)||t),c(e),()=>{const t=s.indexOf(r);-1!==t&&s.splice(t,1),0===s.length&&(o(),o=null)}}}}()}update(){let t=this.targetSocket.x,e=this.sourceSocket.x,n=this.targetSocket.y,o=this.sourceSocket.y;if(!(t&&n&&e&&o&&this.curvature))return;let s=t-(t-e)/2,c=e+(t-e)/2;s=Math.max(s,e+this.curvature),c=Math.min(s,t-this.curvature);let l=o,u=n;this.curve.set(`M${e},${o} C${s}, ${l} ${c},${u} ${t},${n}`)}}function Z(e,n,o){let s,c=t,l=()=>(c(),c=function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(u,t=>o(1,s=t)),u);e.$$.on_destroy.push(()=>c());let u,{relation:r}=n,{curvature:i=100}=n;return r.curvature=i,l(),e.$set=t=>{"relation"in t&&o(2,r=t.relation),"curvature"in t&&o(3,i=t.curvature)},e.$$.update=()=>{4&e.$$.dirty&&(r.update(),l(o(0,u=r.curve)))},[u,s,r,i]}class tt extends K{constructor(t){super(),J(this,t,Z,V,c,{relation:2,curvature:3})}}function et(e){let n;return{c(){n=p("button"),v(n,"class","svelte-19aedad")},m(t,o){a(t,n,o),e[1](n)},p:t,i:t,o:t,d(t){t&&d(n),e[1](null)}}}class nt{constructor(t){this.label=t.label}update(){if(!this.element)return;let t=this.element.getBoundingClientRect();this.x=t.left+t.width/2,this.y=t.top+t.height/2}}function ot(t,e,n){let{socket:o}=e;return t.$set=t=>{"socket"in t&&n(0,o=t.socket)},[o,function(t){E[t?"unshift":"push"](()=>{o.element=t,n(0,o)})}]}class st extends K{constructor(t){super(),J(this,t,ot,et,c,{socket:0})}}function ct(t){let e,n,s,c,f,h,b;const y=t[14].default,k=l(y,t,t[13],null);return{c(){e=p("div"),n=p("div"),s=p("label"),c=g(t[0]),f=$(),k&&k.c(),v(s,"class","svelte-1ks2bpq"),v(n,"class","selector svelte-1ks2bpq"),v(e,"class","drag svelte-1ks2bpq")},m(o,l){a(o,e,l),i(e,n),i(n,s),i(s,c),i(e,f),k&&k.m(e,null),t[15](e),h=!0,b=[m(n,"touchstart",t[2]),m(n,"mousedown",t[2])]},p(t,[e]){(!h||1&e)&&x(c,t[0]),k&&k.p&&8192&e&&k.p(u(y,t,t[13],null),r(y,t[13],e,null))},i(t){h||(F(k,t),h=!0)},o(t){L(k,t),h=!1},d(n){n&&d(e),k&&k.d(n),t[15](null),o(b)}}}function lt(t,e,n){const o=S();let s,c,l,{events:u}=e,{title:r=""}=e,{container:i=null}=e,{x:a=0}=e,{y:d=0}=e,f=!1;function p(t){c=a,l=d,f=!1,u.unsubscribe("move"),u.unsubscribe("stop")}function h(t){f&&(t.preventDefault(),"touchmove"===t.type?(n(4,a=t.touches[0].clientX-c),n(5,d=t.touches[0].clientY-l)):(n(4,a=t.clientX-c),n(5,d=t.clientY-l)),o("drag"))}let{$$slots:g={},$$scope:$}=e;return t.$set=t=>{"events"in t&&n(6,u=t.events),"title"in t&&n(0,r=t.title),"container"in t&&n(3,i=t.container),"x"in t&&n(4,a=t.x),"y"in t&&n(5,d=t.y),"$$scope"in t&&n(13,$=t.$$scope)},t.$$.update=()=>{10&t.$$.dirty&&(i||n(3,i=s)),56&t.$$.dirty&&i&&n(3,i.style.transform="translate3d("+a+"px, "+d+"px, 0)",i)},[r,s,function(t){t.preventDefault(),"touchstart"===event.type?(c=t.touches[0].clientX-a,l=t.touches[0].clientY-d):(c=t.clientX-a,l=t.clientY-d),u.subscribe("move",h),u.subscribe("stop",p),f=!0},i,a,d,u,f,c,l,o,p,h,$,g,function(t){E[t?"unshift":"push"](()=>{n(1,s=t)})}]}class ut extends K{constructor(t){super(),J(this,t,lt,ct,c,{events:6,title:0,container:3,x:4,y:5})}}function rt(t){let e,n,s;const c=t[6].default,i=l(c,t,t[5],null);return{c(){e=p("div"),i&&i.c(),v(e,"class","selectable svelte-oot6ue"),b(e,"selected",t[2]),b(e,"absolute",t[1])},m(o,c){a(o,e,c),i&&i.m(e,null),t[7](e),n=!0,s=[m(e,"mouseenter",t[8]),m(e,"mouseleave",t[9])]},p(t,[n]){i&&i.p&&32&n&&i.p(u(c,t,t[5],null),r(c,t[5],n,null)),4&n&&b(e,"selected",t[2]),2&n&&b(e,"absolute",t[1])},i(t){n||(F(i,t),n=!0)},o(t){L(i,t),n=!1},d(n){n&&d(e),i&&i.d(n),t[7](null),o(s)}}}function it(t,e,n){let{events:o}=e,{absolute:s=!1}=e,{container:c=null}=e,l=!1,u=!1;var r;w(()=>o.subscribe("click",t=>{n(2,l=!!u)})),r=()=>o.unsubscribe("click"),I().$$.on_destroy.push(r);let{$$slots:i={},$$scope:a}=e;return t.$set=t=>{"events"in t&&n(4,o=t.events),"absolute"in t&&n(1,s=t.absolute),"container"in t&&n(0,c=t.container),"$$scope"in t&&n(5,a=t.$$scope)},[c,s,l,u,o,a,i,function(t){E[t?"unshift":"push"](()=>{n(0,c=t)})},t=>n(3,u=!0),t=>n(3,u=!1)]}class at extends K{constructor(t){super(),J(this,t,it,rt,c,{events:4,absolute:1,container:0})}}function dt(t,e,n){const o=t.slice();return o[10]=e[n].label,o[12]=n,o}function ft(t,e,n){const o=t.slice();return o[10]=e[n].label,o[12]=n,o}function pt(t){let e,n,o,s,c,l=t[0].inputs,u=[];for(let e=0;e<l.length;e+=1)u[e]=ht(ft(t,l,e));const r=t=>L(u[t],1,1,()=>{u[t]=null});return{c(){e=p("div"),n=p("label"),n.textContent="Inputs",o=$(),s=p("ul");for(let t=0;t<u.length;t+=1)u[t].c();v(n,"class","svelte-10e1x23"),v(s,"class","sockets svelte-10e1x23"),v(e,"class","inputs svelte-10e1x23")},m(t,l){a(t,e,l),i(e,n),i(e,o),i(e,s);for(let t=0;t<u.length;t+=1)u[t].m(s,null);c=!0},p(t,e){if(1&e){let n;for(l=t[0].inputs,n=0;n<l.length;n+=1){const o=ft(t,l,n);u[n]?(u[n].p(o,e),F(u[n],1)):(u[n]=ht(o),u[n].c(),F(u[n],1),u[n].m(s,null))}for(Y(),n=l.length;n<u.length;n+=1)r(n);j()}},i(t){if(!c){for(let t=0;t<l.length;t+=1)F(u[t]);c=!0}},o(t){u=u.filter(Boolean);for(let t=0;t<u.length;t+=1)L(u[t]);c=!1},d(t){t&&d(e),f(u,t)}}}function ht(t){let e,n,o,s,c,l,u,r=t[10]+"";function f(e){t[2].call(null,e,t[12])}let h={};void 0!==t[0].inputs[t[12]]&&(h.socket=t[0].inputs[t[12]]);const m=new st({props:h});return E.push(()=>G(m,"socket",f)),{c(){e=p("li"),U(m.$$.fragment),o=$(),s=p("span"),c=g(r),l=$(),v(s,"class","svelte-10e1x23"),v(e,"class","svelte-10e1x23")},m(t,n){a(t,e,n),P(m,e,null),i(e,o),i(e,s),i(s,c),i(e,l),u=!0},p(e,o){t=e;const s={};!n&&1&o&&(n=!0,s.socket=t[0].inputs[t[12]],B(()=>n=!1)),m.$set(s),(!u||1&o)&&r!==(r=t[10]+"")&&x(c,r)},i(t){u||(F(m.$$.fragment,t),u=!0)},o(t){L(m.$$.fragment,t),u=!1},d(t){t&&d(e),R(m)}}}function gt(t){let e,n,o,s,c,l=t[0].outputs,u=[];for(let e=0;e<l.length;e+=1)u[e]=$t(dt(t,l,e));const r=t=>L(u[t],1,1,()=>{u[t]=null});return{c(){e=p("div"),n=p("label"),n.textContent="Outputs",o=$(),s=p("ul");for(let t=0;t<u.length;t+=1)u[t].c();v(n,"class","svelte-10e1x23"),v(s,"class","sockets svelte-10e1x23"),v(e,"class","outputs svelte-10e1x23")},m(t,l){a(t,e,l),i(e,n),i(e,o),i(e,s);for(let t=0;t<u.length;t+=1)u[t].m(s,null);c=!0},p(t,e){if(1&e){let n;for(l=t[0].outputs,n=0;n<l.length;n+=1){const o=dt(t,l,n);u[n]?(u[n].p(o,e),F(u[n],1)):(u[n]=$t(o),u[n].c(),F(u[n],1),u[n].m(s,null))}for(Y(),n=l.length;n<u.length;n+=1)r(n);j()}},i(t){if(!c){for(let t=0;t<l.length;t+=1)F(u[t]);c=!0}},o(t){u=u.filter(Boolean);for(let t=0;t<u.length;t+=1)L(u[t]);c=!1},d(t){t&&d(e),f(u,t)}}}function $t(t){let e,n,o,s,c,l,u,r=t[10]+"";function f(e){t[3].call(null,e,t[12])}let h={};void 0!==t[0].outputs[t[12]]&&(h.socket=t[0].outputs[t[12]]);const m=new st({props:h});return E.push(()=>G(m,"socket",f)),{c(){e=p("li"),n=p("span"),o=g(r),s=$(),U(m.$$.fragment),l=$(),v(n,"class","svelte-10e1x23"),v(e,"class","svelte-10e1x23")},m(t,c){a(t,e,c),i(e,n),i(n,o),i(e,s),P(m,e,null),i(e,l),u=!0},p(e,n){t=e,(!u||1&n)&&r!==(r=t[10]+"")&&x(o,r);const s={};!c&&1&n&&(c=!0,s.socket=t[0].outputs[t[12]],B(()=>c=!1)),m.$set(s)},i(t){u||(F(m.$$.fragment,t),u=!0)},o(t){L(m.$$.fragment,t),u=!1},d(t){t&&d(e),R(m)}}}function mt(t){let e,n,o,s=t[0].inputs.length>0&&pt(t),c=t[0].outputs.length>0&&gt(t);return{c(){e=p("div"),s&&s.c(),n=$(),c&&c.c(),v(e,"class","node svelte-10e1x23")},m(t,l){a(t,e,l),s&&s.m(e,null),i(e,n),c&&c.m(e,null),o=!0},p(t,o){t[0].inputs.length>0?s?(s.p(t,o),F(s,1)):(s=pt(t),s.c(),F(s,1),s.m(e,n)):s&&(Y(),L(s,1,1,()=>{s=null}),j()),t[0].outputs.length>0?c?(c.p(t,o),F(c,1)):(c=gt(t),c.c(),F(c,1),c.m(e,null)):c&&(Y(),L(c,1,1,()=>{c=null}),j())},i(t){o||(F(s),F(c),o=!0)},o(t){L(s),L(c),o=!1},d(t){t&&d(e),s&&s.d(),c&&c.d()}}}function vt(t){let e,n,o,s;function c(e){t[4].call(null,e)}function l(e){t[5].call(null,e)}function u(e){t[6].call(null,e)}let r={title:t[0].name,container:t[1],$$slots:{default:[mt]},$$scope:{ctx:t}};void 0!==t[0]&&(r.events=t[0]),void 0!==t[0].x&&(r.x=t[0].x),void 0!==t[0].y&&(r.y=t[0].y);const i=new ut({props:r});return E.push(()=>G(i,"events",c)),E.push(()=>G(i,"x",l)),E.push(()=>G(i,"y",u)),i.$on("drag",t[7]),{c(){U(i.$$.fragment)},m(t,e){P(i,t,e),s=!0},p(t,s){const c={};1&s&&(c.title=t[0].name),2&s&&(c.container=t[1]),16385&s&&(c.$$scope={dirty:s,ctx:t}),!e&&1&s&&(e=!0,c.events=t[0],B(()=>e=!1)),!n&&1&s&&(n=!0,c.x=t[0].x,B(()=>n=!1)),!o&&1&s&&(o=!0,c.y=t[0].y,B(()=>o=!1)),i.$set(c)},i(t){s||(F(i.$$.fragment,t),s=!0)},o(t){L(i.$$.fragment,t),s=!1},d(t){R(i,t)}}}function xt(t){let e,n,o;function s(e){t[8].call(null,e)}function c(e){t[9].call(null,e)}let l={absolute:!0,$$slots:{default:[vt]},$$scope:{ctx:t}};void 0!==t[0]&&(l.events=t[0]),void 0!==t[1]&&(l.container=t[1]);const u=new at({props:l});return E.push(()=>G(u,"events",s)),E.push(()=>G(u,"container",c)),{c(){U(u.$$.fragment)},m(t,e){P(u,t,e),o=!0},p(t,[o]){const s={};16387&o&&(s.$$scope={dirty:o,ctx:t}),!e&&1&o&&(e=!0,s.events=t[0],B(()=>e=!1)),!n&&2&o&&(n=!0,s.container=t[1],B(()=>n=!1)),u.$set(s)},i(t){o||(F(u.$$.fragment,t),o=!0)},o(t){L(u.$$.fragment,t),o=!1},d(t){R(u,t)}}}class bt extends class{constructor(){this.events={}}unsubscribe(t){delete this.events[t]}subscribe(t,e){if(!(e instanceof Function))throw new Error(`'${t}' callback is not a functions`);this.events[t]=e}dispatch(t,e){this.events[t]instanceof Function&&this.events[t](e)}}{constructor(t){super(),this.name=t.name,this.inputs=t.inputs.map(t=>new nt(t)),this.outputs=t.outputs.map(t=>new nt(t))}update(){this.inputs.forEach(t=>t.update()),this.outputs.forEach(t=>t.update())}}function yt(t,e,n){let o,{node:s}=e;return t.$set=t=>{"node"in t&&n(0,s=t.node)},[s,o,function(t,e){s.inputs[e]=t,n(0,s)},function(t,e){s.outputs[e]=t,n(0,s)},function(t){s=t,n(0,s)},function(t){s.x=t,n(0,s)},function(t){s.y=t,n(0,s)},()=>s.update(),function(t){s=t,n(0,s)},function(t){o=t,n(1,o)}]}class kt extends K{constructor(t){super(),J(this,t,yt,xt,c,{node:0})}}class It{constructor(t){this.graph=t,this.horizontalDepth=.5,this.veritcalDepth=.5}initializeNode(t){t=t||0,this.graph.nodes[t].x=300*this.horizontalDepth,this.graph.nodes[t].y=100*this.veritcalDepth,this.horizontalDepth++;let e=this.graph.relations.filter(e=>e.sourceNodeIndex==t);for(let n=0;n<this.graph.nodes[t].outputs.length;n++){let o=e.filter(t=>t.sourceSocketIndex==n);0!=o.length&&(this.initializeNode(o[0].targetNodeIndex),n!=this.graph.nodes[t].outputs.length-1&&this.veritcalDepth++)}this.horizontalDepth--}}function wt(t,e,n){const o=t.slice();return o[10]=e[n],o[12]=n,o}function St(t,e,n){const o=t.slice();return o[13]=e[n],o[12]=n,o}function Nt(t){let e,n;function o(e){t[2].call(null,e,t[12])}let s={};void 0!==t[0].nodes[t[12]]&&(s.node=t[0].nodes[t[12]]);const c=new kt({props:s});return E.push(()=>G(c,"node",o)),{c(){U(c.$$.fragment)},m(t,e){P(c,t,e),n=!0},p(n,o){t=n;const s={};!e&&1&o&&(e=!0,s.node=t[0].nodes[t[12]],B(()=>e=!1)),c.$set(s)},i(t){n||(F(c.$$.fragment,t),n=!0)},o(t){L(c.$$.fragment,t),n=!1},d(t){R(c,t)}}}function Et(t){let e,n;function o(e){t[3].call(null,e,t[12])}let s={};void 0!==t[0].relations[t[12]]&&(s.relation=t[0].relations[t[12]]);const c=new tt({props:s});return E.push(()=>G(c,"relation",o)),{c(){U(c.$$.fragment)},m(t,e){P(c,t,e),n=!0},p(n,o){t=n;const s={};!e&&1&o&&(e=!0,s.relation=t[0].relations[t[12]],B(()=>e=!1)),c.$set(s)},i(t){n||(F(c.$$.fragment,t),n=!0)},o(t){L(c.$$.fragment,t),n=!1},d(t){R(c,t)}}}function Tt(t){let e,n,s,c,l=t[0].nodes,u=[];for(let e=0;e<l.length;e+=1)u[e]=Nt(St(t,l,e));const r=t=>L(u[t],1,1,()=>{u[t]=null});let h=t[0].relations,g=[];for(let e=0;e<h.length;e+=1)g[e]=Et(wt(t,h,e));const x=t=>L(g[t],1,1,()=>{g[t]=null});return{c(){e=p("div");for(let t=0;t<u.length;t+=1)u[t].c();n=$();for(let t=0;t<g.length;t+=1)g[t].c();v(e,"class","graph svelte-1t1skuu")},m(o,l){a(o,e,l);for(let t=0;t<u.length;t+=1)u[t].m(e,null);i(e,n);for(let t=0;t<g.length;t+=1)g[t].m(e,null);s=!0,c=[m(e,"touchstart",t[4]),m(e,"mousedown",t[5]),m(e,"touchmove",t[6]),m(e,"mousemove",t[7]),m(e,"touchend",t[8]),m(e,"mouseup",t[9])]},p(t,[o]){if(1&o){let s;for(l=t[0].nodes,s=0;s<l.length;s+=1){const c=St(t,l,s);u[s]?(u[s].p(c,o),F(u[s],1)):(u[s]=Nt(c),u[s].c(),F(u[s],1),u[s].m(e,n))}for(Y(),s=l.length;s<u.length;s+=1)r(s);j()}if(1&o){let n;for(h=t[0].relations,n=0;n<h.length;n+=1){const s=wt(t,h,n);g[n]?(g[n].p(s,o),F(g[n],1)):(g[n]=Et(s),g[n].c(),F(g[n],1),g[n].m(e,null))}for(Y(),n=h.length;n<g.length;n+=1)x(n);j()}},i(t){if(!s){for(let t=0;t<l.length;t+=1)F(u[t]);for(let t=0;t<h.length;t+=1)F(g[t]);s=!0}},o(t){u=u.filter(Boolean);for(let t=0;t<u.length;t+=1)L(u[t]);g=g.filter(Boolean);for(let t=0;t<g.length;t+=1)L(g[t]);s=!1},d(t){t&&d(e),f(u,t),f(g,t),o(c)}}}class _t{constructor(t){this.nodes=t.nodes.map(t=>new bt(t)),this.relations=t.relations.map(t=>new W(t,this))}dispatch(t,e){this.nodes.forEach(n=>n.dispatch(t,e))}update(){this.nodes.forEach(t=>t.update()),this.relations.forEach(t=>t.update())}}function Dt(t,e,n){let{graph:o}=e,s=new _t(o);w(()=>{(t=>{new It(t).initializeNode()})(s)});return t.$set=t=>{"graph"in t&&n(1,o=t.graph)},t.$$.update=()=>{1&t.$$.dirty&&s.update()},[s,o,function(t,e){s.nodes[e]=t,n(0,s)},function(t,e){s.relations[e]=t,n(0,s)},t=>s.dispatch("click",t),t=>s.dispatch("click",t),t=>s.dispatch("move",t),t=>s.dispatch("move",t),t=>s.dispatch("stop",t),t=>s.dispatch("stop",t)]}return new class extends K{constructor(t){super(),J(this,t,Dt,Tt,c,{graph:1})}}({target:document.body,props:{graph:{nodes:[{name:"Test1",inputs:[],outputs:[{label:"Test1"},{label:"Test2"}]},{name:"Test2",inputs:[{label:"Test"}],outputs:[]},{name:"Test3",inputs:[{label:"Test"}],outputs:[{label:"Test1"},{label:"Test2"},{label:"Test3"}]},{name:"Test4",inputs:[{label:"Test"}],outputs:[]},{name:"Test5",inputs:[{label:"Test"}],outputs:[]},{name:"Test6",inputs:[{label:"Test"}],outputs:[]}],relations:[{sourceNodeIndex:0,sourceSocketIndex:0,targetNodeIndex:1,targetSocketIndex:0},{sourceNodeIndex:0,sourceSocketIndex:1,targetNodeIndex:2,targetSocketIndex:0},{sourceNodeIndex:2,sourceSocketIndex:0,targetNodeIndex:3,targetSocketIndex:0},{sourceNodeIndex:2,sourceSocketIndex:1,targetNodeIndex:4,targetSocketIndex:0},{sourceNodeIndex:2,sourceSocketIndex:2,targetNodeIndex:5,targetSocketIndex:0}]}}})}();
//# sourceMappingURL=bundle.js.map
